CREATE DATABASE AULA38;

CREATE TABLE PRODUTOS
 (SKU INTEGER PRIMARY KEY AUTOINCREMENT,
  DESCRICAO VARCHAR(100),
	PRECO REAL);

CREATE TABLE CLIENTES
 (IDCLIENTE INTEGER PRIMARY KEY AUTOINCREMENT,
  NOME VARCHAR(100));

CREATE TABLE COMPRAS
 (CLIENTE REFERENCES CLIENTES(IDCLIENTE),
  PRODUTO REFERENCES PRODUTOS(SKU),
	DATA DATETIME,
	QUANTIDADE INT NOT NULL);

INSERT INTO CLIENTES (NOME) VALUES ('JOAO CLIENTE'), ('MARIA CLIENTE'), ('TEREZA CLIENTE'), ('JOSE CLIENTE');

INSERT INTO PRODUTOS (DESCRICAO, PRECO)
VALUES
('CALDO DE GALINHA', 3.5),
('ESCOVA DE DENTES', 7.88),
('SABONETE DE BANHO', 3),
('ARROZ DE COMER', 49.95);

INSERT INTO COMPRAS (CLIENTE, PRODUTO, DATA, QUANTIDADE)
VALUES
(1, 1, '2020-11-01', 5),
(1, 4, '2020-11-01', 1),
(2, 2, '2020-11-05', 1),
(2, 3, '2020-11-05', 3),
(3, 1, '2020-11-05', 2),
(4, 2, '2020-11-10', 1),
(4, 3, '2020-11-10', 5),
(4, 4, '2020-11-01', 2);


SELECT STRFTIME('%d/%m/%Y', DATA) DATA, NOME, DESCRICAO, QUANTIDADE
  FROM COMPRAS
  JOIN CLIENTES ON CLIENTE = IDCLIENTE
  JOIN PRODUTOS ON PRODUTO = SKU
 ORDER BY DATA